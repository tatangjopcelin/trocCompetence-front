<ul *ngIf="!loading && !error">
  <li *ngFor="let user of users">
    <h3>{{ user.name }}</h3>

    <!-- Disponibilités publiques -->
    <strong>Disponibilités :</strong>
    <ul>
      <li *ngFor="let d of user.availabilities">
        {{ d.date }} de {{ d.start_time }} à {{ d.end_time }}
      </li>
      <li *ngIf="user.availabilities?.length === 0">Aucune disponibilité</li>
    </ul>

    <!-- Compétences proposées -->
    <strong>Compétences proposées :</strong>
    <ul>
      <li *ngFor="let c of user.proposees">{{ c.name }}</li>
      <li *ngIf="user.proposees.length === 0">Aucune compétence proposée</li>
    </ul>

    <!-- Compétences recherchées -->
    <strong>Compétences recherchées :</strong>
    <ul>
      <li *ngFor="let c of user.recherchees">{{ c.name }}</li>
      <li *ngIf="user.recherchees.length === 0">Aucune compétence recherchée</li>
    </ul>

    <!-- ✅ Bouton de demande d’échange -->
    <button class="btn-contacter" (click)="demanderEchange(user.id)">Contacter</button>

    <!-- ✅ Supprimer seulement si admin -->
    <button class="btn-supprimer" *ngIf="currentUser?.role === 'admin'" (click)="supprimerUser(user.id)">
      Supprimer
    </button>

    <!-- ✅ Message de confirmation ou d'erreur -->
    <p *ngIf="messageMap[user.id]" style="color: green;">{{ messageMap[user.id] }}</p>
  </li>
</ul>
